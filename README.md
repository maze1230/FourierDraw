# Fourier Draw

適当に一筆書きで書いた絵の x 座標と y 座標をそれぞれ Fourier 級数展開し、時間経過とともに描写する

Webassembly と Rust の練習なので、Fourier 級数展開は Rust でも行うようにして Typescript の実装と比較したい

## 機能

### 基本

上の Canvas に一筆書きで何かを10秒以内で書くと、指定した項数で Fourier 級数展開したものが下のCanvasで再生できる

一般に周期関数として不連続だと Gibbs の現象が生じるため、書き始めと書き終わりが汚くなることがあるが、最初と最後を綺麗にするにチェックを入れると内部で適当に処理を行って描画される範囲を Gibbs の現象の影響が出る範囲外にする。

WebAssembly を使用するにチェックを入れると、級数展開や時間ごとの点を計算する部分を WebAssembly で実行する。

計算にかかった時間は左下に通知で表示されるが、デベロッパーツールを開いたままだと Webassembly を用いても遅いので注意。
ただ、それでも重い計算にしても2倍程度にしか早くならない。

### Import / Export

項数が7以下であれば、展開された級数を Base64 にエンコードして Export できる。 32bit 浮動小数点なのでこの項数だが、16bit とかでやれば項数を増やせるはず。

Export したものは Import することができて、そのまま下で再生できる。

Twitter でツイートする機能もつけている。

## 実装の言い訳

明らかに設計を間違えていて、級数展開後の係数を持って書く時間の点を計算するクラスと、実際の点から級数展開する
クラスを分けるべきだった。

分けなかったことで Import や Export の処理が汚くなり、コードの安全性もひどいことになっている。